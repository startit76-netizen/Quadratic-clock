<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Quadratic Time</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --primary: #00d4ff; --bg: #0f172a; --card: #1e293b; }
        body { font-family: 'Courier New', monospace; background: var(--bg); color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: var(--card); padding: 2rem; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.4); text-align: center; width: 90%; max-width: 400px; border: 1px solid rgba(255,255,255,0.1); }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .tab-btn { padding: 8px 16px; border: 1px solid var(--primary); background: transparent; color: var(--primary); cursor: pointer; border-radius: 20px; }
        .tab-btn.active { background: var(--primary); color: var(--bg); font-weight: bold; }
        #display-time { font-size: 1.2rem; color: #94a3b8; }
        #equation { font-size: 2rem; color: var(--primary); margin: 20px 0; min-height: 50px; word-wrap: break-word; }
        .controls { margin-top: 15px; display: none; }
        input { width: 50px; padding: 8px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; text-align: center; }
        button.start-btn { background: #10b981; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; margin-left: 5px; }
    </style>
</head>
<body>
<div class="container">
    <div class="tabs">
        <button class="tab-btn active" id="live-tab" onclick="setMode('live')">Live</button>
        <button class="tab-btn" id="timer-tab" onclick="setMode('timer')">Timer</button>
    </div>
    <div id="display-time">00:00:00</div>
    <div id="equation">x² = 0</div>
    <div id="timer-controls" class="controls">
        <input type="number" id="timerInput" value="5"> mins
        <button class="start-btn" onclick="startTimer()">START</button>
    </div>
</div>
<script>
    let mode = 'live'; let timerInterval; let remainingSeconds = 0;
    function setMode(m) {
        mode = m;
        document.getElementById('live-tab').classList.toggle('active', m === 'live');
        document.getElementById('timer-tab').classList.toggle('active', m === 'timer');
        document.getElementById('timer-controls').style.display = m === 'timer' ? 'block' : 'none';
        if (m === 'live') startLive(); else clearInterval(timerInterval);
    }
    function formatEq(r1, r2) {
        const s = r1 + r2; const p = r1 * r2;
        const b = s === 0 ? "" : (s > 0 ? `- ${s}x` : `+ ${Math.abs(s)}x`);
        const c = p === 0 ? "" : (p > 0 ? `+ ${p}` : `- ${Math.abs(p)}`);
        return `x² ${b} ${c} = 0`;
    }
    function startLive() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            const n = new Date(); const h = n.getHours(); const m = n.getMinutes(); const s = n.getSeconds();
            document.getElementById('display-time').innerText = `${h}:${m}:${s}`;
            document.getElementById('equation').innerText = formatEq(h, m);
        }, 1000);
    }
    function startTimer() {
        clearInterval(timerInterval);
        remainingSeconds = parseInt(document.getElementById('timerInput').value) * 60;
        timerInterval = setInterval(() => {
            if (remainingSeconds <= 0) { clearInterval(timerInterval); return; }
            remainingSeconds--;
            const r1 = Math.floor(remainingSeconds / 60); const r2 = remainingSeconds % 60;
            document.getElementById('display-time').innerText = `Left: ${r1}:${r2}`;
            document.getElementById('equation').innerText = formatEq(r1, r2);
        }, 1000);
    }
    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('./sw.js'); }
    startLive();
</script>
</body>
  </html>
